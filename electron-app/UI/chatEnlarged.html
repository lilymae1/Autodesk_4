<!DOCTYPE html>
<html lang="en">

<div id = "chat-enlarged-head">
    <meta charset="UTF-8">
    <title>Archie Forklift</title>
    <link rel="stylesheet" href="chatEnlargedStyle.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script>
        var xhr = new XMLHttpRequest();
        xhr.open('GET', 'Nav.html', true);
        xhr.onload = function () {
            if (xhr.status == 200) {
                console.log("Nav.html loaded successfully");
                $("#includedNavContent").html(xhr.responseText);
            } else {
                console.error("Error loading Nav.html: " + xhr.status);
                $("#includedNavContent").html("Error loading Nav.html");
            }
        };
        xhr.onerror = function () {
            console.error("Request failed");
            $("#includedNavContent").html("Error loading Nav.html");
        };
        xhr.send();

    </script>
</div>


<div id ="chat-enlarged-body">
    <div id="includedNavContent"></div>
    <div id="chat-top">
    <button class="menuButton" id="active"><a href="#">Current chat</a></button>
    <button class="menuButton"><a href="chatHistoryEnlarged.html">Old chats</a></button>
    <button class="menuButton" id="minimizeButton"><a href="chat.html">Minimise</a></button>   
    </div>
    </div>
    <div id="chat">    
    </div>
    <div id="input-container">
        <form onsubmit="send_message(event)" id="message_sender">
            Enter message: <input type="text" id="input">
            <button id="send">Send</button>
        </form>
    </div>
</div>

<div id = "chat-enlarged-footer">
    <script>
        var xhr1 = new XMLHttpRequest();
        xhr1.open('GET', 'Footer.html', true);
        xhr1.onload = function () {
            if (xhr1.status == 200) {
                console.log("footer.html loaded successfully");
                $("#includedFooterContent").html(xhr1.responseText);
            } else {
                console.error("Error loading footer.html: " + xhr1.status);
                $("#includedFooterContent").html("Error loading Nav.html");
            }
        };
        xhr1.onerror = function () {
            console.error("Request failed");
            $("#includedFooterContent").html("Error loading footer.html");
        };
        xhr1.send();
    </script>
    <div id="includedFooterContent"></div>
</div>
    <!-- Load render.js for shared chat functionality -->
    <script src="../render.js"></script>    
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            if (window.chatAPI) {
                console.log("chatAPI is available");

                // Minimise Button Click Event
                document.getElementById("minimizeButton").addEventListener("click", (event) => {
                    if (window.chatAPI.minimizeChat) {
                        window.chatAPI.minimizeChat(); // Calls Electron backend to resize the window
                    } else {
                        console.error("minimizeChat function is not available");
                    }
                });
            } else {
                console.error("chatAPI is undefined");
            }
        });
    </script>
</html>