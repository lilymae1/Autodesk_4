<!DOCTYPE html>
<html lang="en">

<div id = "chat-enlarged-head">
    <meta charset="UTF-8">
    <title>Archie Forklift</title>
    <link rel="stylesheet" href="chatEnlargedStyle.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script>
        var xhr = new XMLHttpRequest();
        xhr.open('GET', 'Nav.html', true);
        xhr.onload = function () {
            if (xhr.status == 200) {
                console.log("Nav.html loaded successfully");
                $("#includedNavContent").html(xhr.responseText);
            } else {
                console.error("Error loading Nav.html: " + xhr.status);
                $("#includedNavContent").html("Error loading Nav.html");
            }
        };
        xhr.onerror = function () {
            console.error("Request failed");
            $("#includedNavContent").html("Error loading Nav.html");
        };
        xhr.send();

    </script>
</div>


<div id ="chat-enlarged-body">
    <div id="includedNavContent"></div>
    <div id="chat-top">
    <button class="menuButton" id="active"><a href="#">Current chat</a></button>
    <button class="menuButton"><a href="chatHistoryEnlarged.html">Old chats</a></button>
    <button class="menuButton"><a href="chat.html">Minimise</a></button>    
    </div>
    </div>
    <div id="chat">
            
        <div class="received-msg">
            <div class="received-chats">
                <div class="received-msg-inbox">
                    <p>Hi !! This is a message from Archie Forklift. Lorem ipsum dolor sit amet consectetur adipisicing elit.</p>
                    <span class="received-time">18:06 PM | July 24</span>
                </div>
                <div class="received-chats-img">
                    <img src="Assets/archie.png" width="42" height="42" style="border-radius: 21px;">
                </div>
            </div>
        </div>
        <div class="outgoing-msg">
            <div class="outgoing-chats">
                <div class="outgoing-chats-msg">
                    <p>Hi Riya, Lorem ipsum dolor sit amet consectetur adipisicing elit.</p>
                    <span class="outgoing-time">18:30 PM | July 24</span>
                </div>
                <div class="outgoing-chats-img">
                    <img src="Assets/ProfileIcon.png" width="42" height="42" style="border-radius: 21px;">
                </div>
            </div>
        </div>
        
        
    </div>
    <div id="input-container">
        <form onsubmit="send_message(event)" id="message_sender">
            Enter message: <input type="text" id="input">
            <button id="send">Send</button>
        </form>
    </div>
</div>

<div id = "chat-enlarged-footer">
    <script>
        var xhr1 = new XMLHttpRequest();
        xhr1.open('GET', 'Footer.html', true);
        xhr1.onload = function () {
            if (xhr1.status == 200) {
                console.log("footer.html loaded successfully");
                $("#includedFooterContent").html(xhr1.responseText);
            } else {
                console.error("Error loading footer.html: " + xhr1.status);
                $("#includedFooterContent").html("Error loading Nav.html");
            }
        };
        xhr1.onerror = function () {
            console.error("Request failed");
            $("#includedFooterContent").html("Error loading footer.html");
        };
        xhr1.send();
    </script>
    <div id="includedFooterContent"></div>
</div>
    
    <script>
        function archie_message() {
            let receivedDiv = document.createElement('div');
            receivedDiv.className = 'received-msg';

            let receivedChats = document.createElement('div');
            receivedChats.className = 'received-chats';

            let archieImg = document.createElement('div');
            archieImg.className = 'received-chats-img';
            archieImg.innerHTML = '<img src="Assets/archie.png" width="42" height="42" style="border-radius: 21px;">';

            let inbox = document.createElement('div');
            inbox.className = 'received-msg-inbox';

            let message = document.createElement('p');
            message.textContent = "Archie is here to help!"; // Archie should have a static message

            let timestamp = document.createElement('span');
            timestamp.className = 'received-time';
            timestamp.textContent = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });

            // Append elements together
            inbox.appendChild(message);
            inbox.appendChild(timestamp);
            receivedChats.appendChild(archieImg);
            receivedChats.appendChild(inbox);
            receivedDiv.appendChild(receivedChats);

            document.getElementById("chat").appendChild(receivedDiv);
        }

        function send_message(event) {
            event.preventDefault();
            let messageInput = document.getElementById("input");

            if (messageInput.value.trim() === "") return; // Prevent sending empty messages

            let outgoingDiv = document.createElement('div');
            outgoingDiv.className = 'outgoing-msg';

            let outgoingChats = document.createElement('div');
            outgoingChats.className = 'outgoing-chats';

            let msgBox = document.createElement('div');
            msgBox.className = 'outgoing-chats-msg';

            let msgText = document.createElement('p');
            msgText.className = 'multi-msg';
            msgText.textContent = messageInput.value;

            let timestamp = document.createElement('span');
            timestamp.className = 'outgoing-time';
            timestamp.textContent = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });

            let userImg = document.createElement('div');
            userImg.className = 'outgoing-chats-img';
            userImg.innerHTML = '<img src="Assets/ProfileIcon.png" width="42" height="42" style="border-radius: 21px;">';

            // Append elements together
            msgBox.appendChild(msgText);
            msgBox.appendChild(timestamp);
            outgoingChats.appendChild(userImg);
            outgoingChats.appendChild(msgBox);
            outgoingDiv.appendChild(outgoingChats);

            document.getElementById("chat").appendChild(outgoingDiv);
            messageInput.value = "";

            // Simulate Archie's response after 1 second
            setTimeout(archie_message, 1000);
        }

        document.getElementById("send").addEventListener("click", send_message);
    </script>
</html>